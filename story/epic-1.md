# Story Card 1

## 标题

为 Home 页面集成安全、现代的基于密码的用户认证

## 背景与目标

当前 Home 页面对所有用户开放，缺乏访问控制。为保护内容、实现分级访问和个性化体验，需引入安全、易用、可扩展的基于密码认证机制，并为注册、找回密码、OAuth 等后续扩展预留接口。

## 需求概述

1. **登录入口**
   - Home 页面显著位置提供"登录"按钮，未登录用户访问时自动弹出登录界面。
   - 登录界面采用 ShadCN UI，支持深浅色模式。
2. **密码认证**
   - 用户通过用户名/邮箱+密码登录。
   - 前端表单需基础校验（必填、格式），清晰错误提示。
   - 密码框支持显示/隐藏切换。
3. **后端认证**
   - 登录请求经 Hono API 路由转发至 Cloudflare Workers。
   - 密码后端安全校验（bcrypt），禁止明文存储。
   - 认证成功返回 JWT 或安全 session token，存于 HttpOnly cookie。
4. **认证态管理**
   - 前端用 React Context 管理登录态。
   - 登录后自动跳转 Home，显示用户信息及"登出"按钮。
   - 未登录访问受保护页自动重定向登录。
5. **安全性**
   - API 防暴力破解（限流、模糊错误提示）。
   - 全程 HTTPS，Token 采用 HttpOnly+Secure 属性。
6. **用户体验**
   - 登录/登出过程有 loading、成功、失败反馈。
   - 支持"记住我"延长登录有效期。
   - 登录后显示欢迎语和头像（如有）。
7. **可扩展性**
   - 结构便于扩展注册、找回密码、第三方登录。
   - 前后端认证逻辑解耦，便于迁移升级。

## 验收标准

- 未登录用户访问 Home 必须先登录。
- 登录流程安全流畅，UI 友好，错误提示明确。
- 登录后可访问 Home，显示用户信息。
- 支持登出，登出后需重新登录。
- 认证相关代码有良好注释和文档。

